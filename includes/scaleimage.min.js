function ScaleImage(a,b,c,d,e){var f={width:0,height:0,fScaleToTargetWidth:true};if(a<=0||b<=0||c<=0||d<=0){return f}var g=c;var h=b*c/a;var i=a*d/b;var j=d;var k=i>c;if(k){k=e}else{k=!e}if(k){f.width=Math.floor(g);f.height=Math.floor(h);f.fScaleToTargetWidth=true}else{f.width=Math.floor(i);f.height=Math.floor(j);f.fScaleToTargetWidth=false}f.targetleft=Math.floor((c-f.width)/2);f.targettop=Math.floor((d-f.height)/2);return f}function getOriginalDimensionsOfImg(a){var b=new Image;var c={width:0,height:0};b.src=(a.getAttribute?a.getAttribute("src"):false)||a.src;c.width=b.width;c.height=b.height;return c}